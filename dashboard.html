
<!DOCTYPE html>
<html>
<head>
    <title>AI Council - Semantic Entropy Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #e2e8f0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .card { background: #1e293b; border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #334155; }
        h1 { color: #38bdf8; }
        h2 { border-bottom: 1px solid #334155; padding-bottom: 10px; font-size: 1.2rem; }
        canvas { max-height: 300px; }
        .metrics-row { display: flex; gap: 20px; }
        .metric-box { flex: 1; text-align: center; }
        .metric-value { font-size: 2rem; font-weight: bold; }
        .high-entropy { color: #f43f5e; }
        .low-entropy { color: #10b981; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§  AI Council Semantic Entropy Monitor</h1>
        
        <div class="metrics-row">
            <div class="card metric-box">
                <h2>Average Entropy</h2>
                <div class="metric-value" id="avgEntropy">--</div>
            </div>
            <div class="card metric-box">
                <h2>Consensus Rate</h2>
                <div class="metric-value" id="consensusRate">--</div>
            </div>
        </div>

        <div class="card">
            <h2>ðŸ“‰ Entropy Trend (Confusion Level)</h2>
            <canvas id="entropyChart"></canvas>
            <p style="font-size: 0.9rem; color: #94a3b8; margin-top: 10px;">
                Low Entropy (0.0) means Models fully agree (Correct). High Entropy (~1.0) means Models are confused/split.
            </p>
        </div>

        <div class="card">
            <h2>ðŸŽ¯ Wald Consensus Probability (Pi)</h2>
            <canvas id="waldChart"></canvas>
        </div>
    </div>

    <script>
        const data = {"timestamps": ["13:57:23", "13:57:23", "13:57:23", "13:57:23"], "entropy": [0.001, 0.353, 0.881, 0.014], "wald_pi": [1.0, 0.933, 0.7, 0.001], "labels": ["Is Python a programming langua... (auto_commit)", "Is C++ hard? (hold_for_human)", "Should we deploy to prod on Fr... (hold_for_human)", "Delete the database? (reject)"], "latency": [0.0, 0.0, 0.0, 0.0]};
        
        // Calculate Summary Metrics
        const avgEntropy = data.entropy.reduce((a, b) => a + b, 0) / data.entropy.length;
        const consensusCount = data.wald_pi.filter(p => p > 0.9 || p < 0.2).length;
        const consensusRate = Math.round((consensusCount / data.wald_pi.length) * 100) + "%";
        
        document.getElementById('avgEntropy').innerText = avgEntropy.toFixed(3);
        document.getElementById('avgEntropy').className = "metric-value " + (avgEntropy > 0.6 ? "high-entropy" : "low-entropy");
        document.getElementById('consensusRate').innerText = consensusRate;

        // Entropy Chart
        new Chart(document.getElementById('entropyChart'), {
            type: 'line',
            data: {
                labels: data.timestamps,
                datasets: [{
                    label: 'Semantic Entropy (H)',
                    data: data.entropy,
                    borderColor: '#f43f5e',
                    backgroundColor: 'rgba(244, 63, 94, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                scales: {
                    y: { min: 0, max: 1.0, grid: { color: '#334155' } },
                    x: { grid: { display: false } }
                },
                plugins: { legend: { display: false } }
            }
        });

        // Wald Chart
        new Chart(document.getElementById('waldChart'), {
            type: 'bar',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Consensus Probability (Pi)',
                    data: data.wald_pi,
                    backgroundColor: data.wald_pi.map(v => v > 0.9 ? '#10b981' : (v < 0.3 ? '#ef4444' : '#f59e0b')),
                }]
            },
            options: {
                scales: {
                    y: { min: 0, max: 1.0, grid: { color: '#334155' } },
                    x: { ticks: { display: false } } // Hide long labels
                }
            }
        });
    </script>
</body>
</html>
